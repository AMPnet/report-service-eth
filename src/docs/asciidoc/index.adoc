= AMPnet Report Service API Documentation
Version {version}, {date}
:doctype: book
:toc: left
:sectnums:
:toclevels: 2
:source-highlighter: prettify
:docinfo: shared
:icons: font

== Introduction
This document contains generated documentation for `AMPnet report-service`. Report service contains all endpoints
for generating reports in PDF
Source code is available on https://github.com/AMPnet/report-service[Github].

== Transaction History API
All requests need header: `Authorization: Bearer JWT`.
Chain ID must be provided in the request path, e.g. 80001.

=== Get transaction history
Query parameters `from` and `to` are both optional.

.Request
include::{snippets}/TxHistoryControllerTest/mustBeAbleToGetTransactionForSpecificPeriod/http-request.adoc[]
.Response
include::{snippets}/TxHistoryControllerTest/mustBeAbleToGetTransactionForSpecificPeriod/http-response.adoc[]

== Reporting API
All requests need header: `Authorization: Bearer JWT`.
Chain ID must be provided in the request path, e.g. 80001.

=== Get user transactions report
Query parameters `from` and `to` are both optional.

.Request
include::{snippets}/ReportingControllerTest/mustBeAbleToGeneratePdfForAllUserTransactions/http-request.adoc[]
Response is a PDF file data.

=== Get user transaction report
Query parameters `txHash`, `fromTxHash` and `toTxHash` are required.

.Request
include::{snippets}/ReportingControllerTest/mustBeAbleToGeneratePdfForUserTransaction/http-request.adoc[]
Response is a PDF file data.

== Admin Reporting API
All requests need header: `Authorization: Bearer JWT`. Only owner of the issuer contract can access this API.
Chain ID must be provided in the request path, e.g. 80001.

=== Get active users accounts summary report
Query parameters `from` and `to` are both optional.

.Request
include::{snippets}/AdminControllerTest/mustBeAbleToGeneratePdfForAllActiveUsers/http-request.adoc[]
Response is a PDF file data.

=== User stats report
Issuer owner can download the xlsx report with users list.

.Request
include::{snippets}/AdminControllerTest/mustBeAbleToDownloadXlsxForVerifiedUsers/http-request.adoc[]
Response is xlsx file data.
